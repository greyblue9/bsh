public static com.ibm.icu.text.CharsetDetector getCharsetDetector(String path) { FileDescriptor fd = PosixUtil.open(path, 0, PosixUtil.O_RDONLY); libcore.io.StructStat st = PosixUtil.fstat(fd); long size = st.st_size; FileInputStream fis = null; try { BufferedInputStream bis = new BufferedInputStream((fis = new FileInputStream(fd))); bis.mark((int) (size+1)); com.ibm.icu.text.CharsetDetector cd = new com.ibm.icu.text.CharsetDetector().setText(new org.apache.commons.io.input.AutoCloseInputStream(bis)); return cd; } finally {   } };
