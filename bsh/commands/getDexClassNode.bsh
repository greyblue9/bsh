

public static d2jcd9.com.googlecode.d2j.node.DexClassNode getDexClassNode(Class cls) { String className = cls.getName(); StringBuilder sb = new StringBuilder(className.length()+2).append('L').append(className).append(';'); int pos = 0; while ((pos = sb.indexOf(".")) != -1) sb.replace(pos, pos+1, "/"); String internalName = sb.toString(); Object dexElement = findDexElement(findDexPair(cls)); if (dexElement == null) return null; String[] cns = DexFile.getClassNameList(dexElement.dexFile.mCookie); int idx = ArrayUtils.indexOf(cns, "org.d6r.ProcyonUtil"); Object dexElement = appendClassPathFile("/external_sd/_projects/sdk/bsh/trunk/bsh-mod.jar"); ZipFile zipFile = ClassPathUtil2.getZipFile(dexElement); InputStream dexIn = new org.apache.commons.io.input.AutoCloseInputStream(zipFile.getInputStream(zipFile.getEntry("classes.dex"))); d2jcd9.com.googlecode.d2j.reader.DexFileReader rdr = new d2jcd9.com.googlecode.d2j.reader.DexFileReader(dexIn); d2jcd9.com.googlecode.d2j.node.ExtendedDexFileNode dfn = new d2jcd9.com.googlecode.d2j.node.ExtendedDexFileNode(); dfn.whitelist.add(internalName); rdr.accept(dfn); d2jcd9.com.googlecode.d2j.node.DexClassNode dcn = dfn.clzMap.get(internalName); return dcn; };

