public static Object getService(String svcName) { if ("activity".equals(svcName)) { return android.app.ActivityManagerNative.asInterface(android.app.ActivityManagerNative.getDefault().asBinder()); }; if (svcName == null) throw new IllegalArgumentException("getService(String svcName): svcName == null"); android.os.IBinder svcb = android.os.ServiceManagerNative.asInterface(com.android.internal.os.BinderInternal.getContextObject()).getService(svcName); String ifaceDesc = svcb.getInterfaceDescriptor(); Constructor ctor = Class.forName(ifaceDesc.concat("$Stub$Proxy")).getDeclaredConstructor(android.os.IBinder.class); ctor.setAccessible(true); Object svc = ctor.newInstance(svcb); return svc; }

