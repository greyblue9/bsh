public static Map getSystemSettings(String nameQuery) { Map result = new TreeMap(); String[] output = StringUtils.split(PosixFileInputStream.pexecSync("sqlite3", "/data/data/com.android.providers.settings/databases/settings.db", String.format("select T.name, T.value from (select name, value from global T union select name, value from secure U union select name, value from system V) T where lower(T.name) like '%s'", nameQuery.toLowerCase())), "\n"); for (String outputLine: output) { int delimpos = outputLine.indexOf('|'); String name = outputLine.substring(0, delimpos); String value = outputLine.substring(delimpos+1); result.put(name, value); } return result; }

