public static String getUndefContext(EvalError ex) { String ident = ex.detailMessage.replaceAll("^Undefined argument: (.+)$", "$1"); bsh.BSHPrimaryExpression undefUsageExpr = (bsh.BSHPrimaryExpression) Reflector.invokeOrDefault(CollectionUtil2.filter(Reflector.invokeOrDefault(bsh.SimpleNode.DEFAULT, "findChild", Reflect.getfldval(ex.callstack.top(), "callerInfoNode"), bsh.BSHPrimaryExpression.class, 15), Pattern.compile(String.format("^%s$", ident.replaceAll("(\\W)", "\\\\$1"))).matcher("")), "get", 0);  Object node = undefUsageExpr; Field pf = SimpleNode.class.getDeclaredField("parent"); pf.setAccessible(true);  while (pf.get(node) != null && ((ctxMchr = Pattern.compile(String.format("^%s$", ident.replaceAll("(\\W)", "\\\\$1"))).matcher(String.valueOf(pf.get(node))))).find() == false) { node  = pf.get(node);   }; return String.valueOf(node).replaceAll("\\b" + ident + "\\b", dumpMembers.colorize(ident, "1;31"));  };

