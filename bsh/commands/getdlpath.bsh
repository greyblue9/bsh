
Object key = null; map = new org.d6r.RealArrayMap(); idb = DatabaseUtil.wrap("/data/data/jp.peo3.android.intentspooler/databases/intent.db"); iqobj = idb.openQuery("select * from intent i where i.summary like \"%content://%\" and i.summary like \"%FileProvider/%\" order by i._id desc limit 1"); extras = iqobj.list().get(0).get("extras"); p = android.os.Parcel.obtain(); p.writeByteArray(extras); datalen = p.dataPosition(); vals=new ArrayList(); for (i=0; i<datalen; ++i) { try { p.setDataPosition(i); val = p.readValue(ClassLoader.getSystemClassLoader()); if (val==null) continue; if (val instanceof CharSequence && ((CharSequence)val).toString().trim().length() == 0) continue; if (key!=null) { map.put(key,val); key = null; } else { if (val instanceof CharSequence && Character.isAlphabetic(val.toString().charAt(0))) key = val; }; } catch (Throwable e) { continue;; };; vals.add(val); };   if (!map.containsKey("android.intent.extra.STREAM")) map.put("android.intent.extra.STREAM", vals.filter("^content://").firstOrDefault()); System.out.println(new URI(map.get("android.intent.extra.STREAM").path.encoded).decode(map.get("android.intent.extra.STREAM").path.encoded).replace("/downloads", "/data/media/0/Download")); ;

