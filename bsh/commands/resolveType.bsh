
public static com.strobel.assembler.metadata.TypeReference resolveType(com.strobel.decompiler.languages.java.ast.AstNode ast, String name) { com.strobel.decompiler.languages.java.ast.AstType typeNode = CollectionUtil2.typeFilter(CollectionUtil2.filter(ast.getDescendants(), Pattern.compile(String.format("^%s$", name))), com.strobel.decompiler.languages.java.ast.AstType.class).iterator().next(); Map dataMap = ProcyonUtil.getDataMap(typeNode); com.strobel.assembler.metadata.TypeReference tr = dataMap.get(dataMap.containsKey(ProcyonUtil.TYPE_DEFINITION)? ProcyonUtil.TYPE_DEFINITION: ProcyonUtil.TYPE_REFERENCE); com.strobel.assembler.metadata.TypeDefinition td = (tr instanceof com.strobel.assembler.metadata.TypeDefinition)? (com.strobel.assembler.metadata.TypeDefinition) tr: null; if (td == null) { try { td = tr.resolve(); } catch (Throwable e) { System.err.printf("[WARN] Could not fully resolve type: %s\n", ClassInfo.typeToName(tr.getErasedSignature())); }; }; return td != null? td: tr; }

