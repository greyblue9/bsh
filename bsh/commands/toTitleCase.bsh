public static String toTitleCase(String str) { String s = org.apache.commons.lang.StringUtils.capitaliseAllWords(s.toLowerCase()); Matcher mchr = Pattern.compile("\\b(a|an|the|of|by|with)\\b", Pattern.CASE_INSENSITIVE).matcher(s); StringBuffer sb = new StringBuffer(); mchr.reset(s); int lastend=0;  while (mchr.find()) { mr = mchr.toMatchResult();  sb.append(s.subSequence(lastend, mr.start(0)));  mchr.appendReplacement(sb, mr.group(1).toLowerCase());  lastend = mr.end(0) + 1; };  mchr.appendTail(sb);  return StringUtils.capitalize(sb.toString()); };