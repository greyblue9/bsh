public static DexPathList updateLibPath(PathClassLoader ldr) { DexPathList dpl = getfldval(ldr, "pathList"); java.io.File[] libDirs = getfldval(dpl, "nativeLibraryDirectories"); StringBuilder sb = new StringBuilder(128); for (File libDir: libDirs) { if (sb.length() != 0) sb.append(':'); sb.append(libDir.getPath()); } String libDirsStr = sb.toString(); Field fld = dalvik.system.BaseDexClassLoader.class.getDeclaredField("originalLibraryPath"); fld.setAccessible(true); fld.set(ldr, libDirsStr); return dpl; } 
