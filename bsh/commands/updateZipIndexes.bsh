
public static Pair updateZipIndexes(File startDir, int friendlyMaxDepth) { int maxdepth = friendlyMaxDepth - 1; import org.apache.commons.collections4.map.ListOrderedMap;   Map okMap = new ListOrderedMap();  Map failedMap = new ListOrderedMap();  dalvik.system.VMRuntime vmr = dalvik.system.VMRuntime.getRuntime(); File[] cpfiles = findFiles.iterate("/external_sd/_projects/sdk/lib", 1, ".*\\.jar").toArray(new File[0]);     rd = new com.sun.tools.javac.file.RelativePath.RelativeDirectory(""); rf = new com.sun.tools.javac.file.RelativePath.RelativeFile(rd, "classes.dex");  for (File cpfile: cpfiles) {  try { zfIndex = new ZipFileIndex(cpfile, rd, true, true, "/storage/extSdCard/_projects/index_cache/"); boolean ok = zfIndex.writeZipIndex(); System.err.printf("[ %5s ]: %s\n", Boolean.valueOf(ok), zfIndex); (ok? okMap: failedMap).put(cpfile.getPath(), zfIndex);     } catch (Throwable ex) { System.err.printf("[ fail! ] %s\n  - %s [%s]\n", cpfile, ExceptionUtils.getRootCause(ex).getClass().getSimpleName(), ExceptionUtils.getRootCause(ex).toString()); } }; return Pair.of(okMap, failedMap); }

